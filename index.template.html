<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">
  <title>Maze Generator</title>
  <script defer src="bundle.js"></script>
  <style>
    canvas {
      width: 100%;
      image-rendering: pixelated;
    }
    
    .tree-item {
      cursor: pointer;
      padding: 5px 10px;
      margin: 2px 0;
      border-radius: 3px;
      transition: background-color 0.2s;
    }
    
    .tree-item:hover {
      background-color: #e8e8e8;
    }
    
    .tree-item.active {
      background-color: #3273dc;
      color: white;
    }
    
    .maze-grid {
      display: inline-block;
      border: 2px solid #333;
      background: #333;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      border-radius: 4px;
    }
    
    .maze-container {
      display: flex;
      gap: 20px;
      margin-top: 20px;
      min-height: 600px;
    }
    
    .maze-row {
      display: flex;
      height: auto;
    }
    
    .maze-cell {
      width: 20px;
      height: 20px;
      border: 1px solid #666;
      position: relative;
      flex-shrink: 0;
      box-sizing: border-box;
      display: inline-block;
    }
    
    .maze-indicator {
      width: 20px;
      height: 10px;
    }
    
    /* Remove media queries - let JavaScript handle dynamic sizing */
    
    .maze-cell.wall {
      background: #777;
      border: 1px solid #aaa;
    }
    
    .maze-cell.path {
      background: white;
      border: 1px solid #ddd;
    }
    
    .maze-indicator.horizontal {
      background: white;
    }
    
    .maze-indicator.up {
      background: #ff7;
    }
    
    .maze-indicator.down {
      background: #7ff;
    }
  </style>
</head>

<body>
    <section class="section">
    <div class="has-text-centered mb-6">
      <h1 class="title is-1 has-text-primary">Minecraft Maze Generator</h1>
      <p class="subtitle is-5 has-text-grey">Create multi-level mazes for your Bedrock Edition worlds</p>
    </div>
    
    <div class="columns">
      <div class="column is-3">
        <div class="box content">
          <strong>Width (in paths):</strong>
          <input class="input" step="5" min="10" max="100" value="20" type="number" data-for="width">
          <strong>Height (in paths):</strong>
          <input class="input" step="5" min="10" max="100" value="20" type="number" data-for="height">
          <strong>Levels:</strong>
          <input class="input" min="1" max="20" value="3" type="number" data-for="levels">
          <strong>Dimensions (blocks):</strong>
          <span data-show="dimensions"></span>
        </div>
        <div class="box content">
          <strong>Wall width:</strong>
          <input class="input" min="1" max="5" value="1" type="number" data-for="wallSize">
          <strong>Wall height:</strong>
          <input class="input" min="1" max="50" value="3" type="number" data-for="wallHeight">
          <strong>Path width:</strong>
          <input class="input" min="1" max="5" value="1" type="number" data-for="walkSize">
          <strong>Wall block:</strong>
          <input class="input is-fullwidth" value="stone" data-for="block">
          <label class="checkbox" style="margin-top: 10px; display: block;">
            <input type="checkbox" data-for="addRoof"> Add ceiling/roof on top of maze
          </label>
        </div>
        <!-- Maze Options (new) -->
        <div class="box content">
          <label class="checkbox">
            <input type="checkbox" data-for="generateHoles" checked>
            Generate holes between levels
          </label>
          <div class="field" style="margin-top: 10px;">
            <label class="label">Number of holes per level</label>
            <div class="control">
              <input class="input" type="number" min="1" max="100" value="1" data-for="holesPerLevel">
            </div>
          </div>
          <label class="checkbox" style="margin-top: 10px;">
            <input type="checkbox" data-for="generateLadders" checked>
            Generate ladders for holes
          </label>
        </div>
        <!-- End Maze Options -->
        <div class="box content">
          <strong>File naming options:</strong>
          <div class="field">
            <label class="radio">
              <input type="radio" name="naming" value="simple" checked>
              Simple: maze.mcfunction
            </label>
          </div>
          <div class="field">
            <label class="radio">
              <input type="radio" name="naming" value="detailed">
              Detailed: <span data-show="detailed-name">20x20maze-ww2wh4pw2wbstone.mcfunction</span>
            </label>
          </div>
          <div class="field">
            <label class="radio">
              <input type="radio" name="naming" value="custom">
              Custom name:
            </label>
            <input class="input" placeholder="Enter custom name" data-for="customName">
            <p class="help" id="customNamePreview" style="display: none;">Preview: <span id="customNameText"></span>.mcfunction</p>
          </div>
        </div>
        <div class="box">
          <h4 class="title is-6">Visual Aids</h4>
          <label class="checkbox" style="display: block; margin-bottom: 8px;">
            <input type="checkbox" data-for="showBlockLegend" checked> Show Block Legend
          </label>
          <label class="checkbox" style="display: block;">
            <input type="checkbox" data-for="showChunkBorders"> Show Chunk Borders
          </label>
        </div>
        <div class="box">
          <div class="buttons">
            <button class="button is-info" onclick="refreshDisplay()">Refresh</button>
            <button class="button is-warning" onclick="regenerateMaze()">Regenerate</button>
            <button class="button is-primary">Download function</button>
          </div>
        </div>
        <div class="box">
          <p class="help">Version: {{VERSION}}</p>
        </div>
        <div class="box">
          <h4 class="title is-6">Credits</h4>
          <div class="content is-small">
            <p><strong>Bibliofile</strong> - For the original codebase I forked and built on top of. Their work provided the foundation for the maze generation logic, TypeScript implementation, and the basic UI structure that I've enhanced and extended.<br>
            <a href="https://github.com/Bibliofile/MinecraftMazeGenerator" target="_blank">github.com/Bibliofile/MinecraftMazeGenerator</a></p>
            
            <p><strong>Jamis Buck</strong> - For the maze generator example and inspiration. His work on maze algorithms, particularly the Growing Tree algorithm, provided the theoretical foundation and implementation ideas that influenced the maze generation approach used in this project. His blog posts and examples were instrumental in understanding maze generation techniques.<br>
            <a href="https://weblog.jamisbuck.org/" target="_blank">weblog.jamisbuck.org</a><br>
            <a href="https://jamisbuck.org/mazes/minecraft.html#" target="_blank">Minecraft Maze Generator</a><br>
            <a href="https://weblog.jamisbuck.org/2011/1/27/maze-generation-growing-tree-algorithm" target="_blank">Growing Tree Algorithm</a></p>
          </div>
        </div>
      </div>
      
      <div class="column is-9">
        <div class="maze-container" style="display: flex; gap: 20px; margin-top: 20px;">
          <div class="tree-view" style="width: 200px; background: #f5f5f5; padding: 15px; border-radius: 5px; max-height: 600px; overflow-y: auto; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
            <h4 class="title is-6">Levels</h4>
            <div id="treeView"></div>
          </div>
          
          <div class="maze-display" style="flex: 1; text-align: center;">
            <!-- Block legend placeholder -->
            <div id="blockLegend" style="margin-bottom: 10px;"></div>
            <div class="level-controls" style="margin-bottom: 15px;">
              <button class="button is-small" onclick="previousLevel()" id="prevBtn">← Previous</button>
              <span class="mx-3">Level <span id="currentLevel">1</span> of <span id="totalLevels">3</span></span>
              <button class="button is-small" onclick="nextLevel()" id="nextBtn">Next →</button>
            </div>
            
            <div id="mazeDisplay" style="display: flex; align-items: center; justify-content: center; min-height: 400px; padding: 20px; position: relative;"></div>
            
            <div class="legend" style="margin-top: 20px; display: flex; justify-content: center; gap: 20px;">
              <div class="legend-item" style="display: flex; align-items: center; gap: 5px;">
                <div class="legend-color yellow" style="width: 20px; height: 20px; border: 1px solid #666; background: #ffff00;"></div>
                <span>Hole + Ladder (Up)</span>
              </div>
              <div class="legend-item" style="display: flex; align-items: center; gap: 5px;">
                <div class="legend-color blue" style="width: 20px; height: 20px; border: 1px solid #666; background: #87ceeb;"></div>
                <span>Hole + Ladder (Down)</span>
              </div>
              <div class="legend-item" style="display: flex; align-items: center; gap: 5px;">
                <div class="legend-color red" style="width: 20px; height: 20px; border: 1px solid #666; background: #ffaaaa;"></div>
                <span>Hole Only (Up)</span>
              </div>
              <div class="legend-item" style="display: flex; align-items: center; gap: 5px;">
                <div class="legend-color purple" style="width: 20px; height: 20px; border: 1px solid #666; background: #aaaaff;"></div>
                <span>Hole Only (Down)</span>
              </div>
            </div>
            <div style="margin-top: 10px; font-size: 12px; color: #666; text-align: center;">
              <strong>Note:</strong> Indicators show hole locations (center of cells). Ladders are placed on adjacent walls.
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</body>

</html>
